package oop.ex4.data_structures;

public class AvlNode implements oop.ex4.data_structures.TreeNode {

    private static final int INITIAL_HEIGHT = 0;

    private int data;
    private int height;
    private AvlNode parent;
    private AvlNode rightChild;
    private AvlNode leftChild;

    /**
     * A constructor for the AvlNode class. This constructor should only be used for the root.
     * @param setData the value to be set as the root's data.
     */
    public AvlNode(int setData){
        data = setData;
        parent = null;
        height = INITIAL_HEIGHT;
    }

    /**
     * A constructor for the AvlNode class. This constructor should be used for the nodes other than the root.
     * @param setData the value to be set as the node's data.
     * @param setParent the node that is this node's parent.
     */
    public AvlNode(int setData, AvlNode setParent){
        data = setData;
        parent = setParent;
        height = INITIAL_HEIGHT;
    }

    @Override
    public void setRightChild(TreeNode newRightChild){
        if (newRightChild != null) {
            rightChild = (AvlNode) newRightChild;
            rightChild.setParent(this);
        } else{
            if (parent.getData() > data) rightChild = null;
            else leftChild = null;
        }
    }

    @Override
    public void setLeftChild(TreeNode newLeftChild){
        if (newLeftChild != null) {
            leftChild = (AvlNode) newLeftChild;
            leftChild.setParent(this);
        } else{
            if (parent.getData() > data) rightChild = null;
            else leftChild = null;
        }
    }

    @Override
    public void setParent(TreeNode newParent){
        parent = (AvlNode) newParent;
    }

    @Override
    public AvlNode getParent() {
        return parent;
    }

    @Override
    public AvlNode getRightChild(){
        return rightChild;
    }

    @Override
    public AvlNode getLeftChild(){
        return leftChild;
    }

    @Override
    public void setData(int newData){
        data = newData;
    }

    @Override
    public int getData(){
        return data;
    }

    @Override
    public int getHeight(){
        return height;
    }

    @Override
    public void setHeight(){
        int leftHeight = -1;
        int rightHeight = -1;

        if (leftChild != null){
            leftHeight = leftChild.getHeight();
        }
        if (rightChild != null){
            rightHeight = rightChild.getHeight();
        }
        height = Math.max(leftHeight, rightHeight) + 1;
    }

}
